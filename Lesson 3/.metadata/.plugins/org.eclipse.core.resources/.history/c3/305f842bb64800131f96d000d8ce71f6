package controller;

import javax.swing.*;

import model.DataSet;
import views.*; 

public class EditSelectedDataPointController {

	DataSet data;
	
	public EditSelectedDataPointController(DataSet ds){
		data = ds;
	}
	
	public boolean act(MainForm mainForm){
		int [] row = mainForm.getDataList().getSelectedIndices();
		if(row.length==0)
			return false;
		
		EditForm editDialog=(EditForm) mainForm.getEditDialog();
		editDialog.setVisible(true);
		
		
	}
	
	public boolean updateDataInList(MainForm mainForm){
		int [] row = mainForm.getDataList().getSelectedIndices();
		if(row.length==0)
			return false;
		//only edit the first one;
		int index=row[0];
		DefaultListModel list = (DefaultListModel)mainForm.getDataList().getModel(); 
		try{
			double x=Double.parseDouble(editDialog.getNewX().getText());
			double y=Double.parseDouble(editDialog.getNewY().getText());
			String dataPointToAdd =  x+" , "+y ;
			list.set(index, dataPointToAdd);
			data.editDataPoint(index, x, y);
			
			}catch(NumberFormatException | NullPointerException e){
				e.printStackTrace();
				}
			return false;
	}
	
}
